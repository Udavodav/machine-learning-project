# Выявленные неточности и их исправление

### Выявленные проблемы

1. Несогласованность протокола разбиения: в документации написано 70/30 train/test (EVALUATION.md), а в коде тестовый сплит 80/20 (clear_data.py (line 116))  
2. Утечка данных: кодировщик и скейлер обучаются на всём датасете до разбиения (clear_data.py (line 81), clear_data.py (line 100)), значит CV/тест метрики могут быть завышены  
3. Oversampling (SMOTE) используется, но важно как: если балансировка не “внутри” каждого фолда CV через pipeline, то CV тоже начинает “подсматривать” статистику


### Исправление

1. Исправление несоответствия в документации (EVALUATION.md), замена (70/30 train/test) на (80/20 train/test)
2. Было сделано разделение данных до кодирования признаков и скейлинга clear_data.py (lines 81-123)
3. Убрали Oversampling (SMOTE) из clear_data.py и добавили smote в models.py при обучении моделей и подборе параметров


### Результаты

В ходе исправлений были получены новые результаты моделей, которые отображены в документах (EVALUATION.md, EXPERIMENTS.md, MODEL_CARD.md)

**Метрики финальной модели до исправления**  
   ROC-AUC:     0.832  
   PR-AUC:      0.641  
   F1-Score:    0.609  
   Precision:   0.583  
   Recall:      0.636  
   Accuracy:    0.783  

**После исправления**  
   ROC-AUC:     0.837  
   PR-AUC:      0.644  
   F1-Score:    0.627  
   Precision:   0.532  
   Recall:      0.765  
   Accuracy:    0.758  